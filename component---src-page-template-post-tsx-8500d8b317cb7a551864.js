"use strict";(self.webpackChunksunrisehouse_github_io=self.webpackChunksunrisehouse_github_io||[]).push([[902],{3030:function(e,t,a){var n=a(7294),r=a(4854);t.Z=()=>n.createElement(n.Fragment,null,n.createElement(r.Xf,{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=G-V0R9C5E0S7"}),n.createElement(r.Xf,null,"\nwindow.dataLayer = window.dataLayer || [];\nfunction gtag(){dataLayer.push(arguments);}\ngtag('js', new Date());\ngtag('config', 'G-V0R9C5E0S7');\n        "))},8416:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var n=a(7294),r=a(3030),s=a(6618);const o="sunrisehouse/sunrisehouse.github.io",l=()=>atob("Z2hwX2l1WnRlU0xGR1B6WXZia0Y4OU9SU0doMjRZMVNPYjJTUWVFaQ=="),c=async e=>{var t;const a=await fetch("https://api.github.com/repos/"+o+"/issues",{method:"GET",headers:{Authorization:"token "+l()}});return null!==(t=(await a.json()).find((t=>t.title=="post "+e+" comments")))&&void 0!==t?t:null};function i(e){const t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate(),r=e.getHours(),s=e.getMinutes();return t+"-"+(a<10?"0"+a:a)+"-"+(n<10?"0"+n:n)+" "+(r<10?"0"+r:r)+":"+(s<10?"0"+s:s)}var m=a(4854);var u=e=>{let{comment:t}=e;return n.createElement("div",{className:"comment-box-comp"},n.createElement("div",{className:"writer-container"},n.createElement("p",{className:"name"},"Writer. ",t.writer),n.createElement("p",{className:"date"},t.writeDate)),n.createElement("div",{className:"content-container"},n.createElement("p",null,t.content)))};var d=e=>{let{writerRef:t,contentRef:a,onClickRegister:r}=e;return n.createElement("form",{className:"register-comment-form-comp",onSubmit:r},n.createElement("div",{className:"form"},n.createElement("label",{className:"writer-label"},n.createElement("span",{className:"label"},"Writer. "),n.createElement("input",{ref:t})),n.createElement("label",{className:"content-label"},n.createElement("span",{className:"label"},"Content"),n.createElement("textarea",{ref:a})),n.createElement("div",{className:"submit-button-container"},n.createElement("button",{type:"submit",className:"submit-button"},"Register")),n.createElement("div",{className:"caution"},"작성하신 댓글은 스스로 삭제하실 수 없습니다! 삭제를 원하시면 ajtwlswjddnv1102@gmail.com 로 연락주세요! 댓글 기능은 Github Issue API 를 이용해 만들었습니다! 댓글 등록이 안되면 연락주세요! 댓글이 바로 반영되지 않을 수도 있어요! API requests limitation 이 있어서 너무 많이 보시면 댓글이 안보입니다!")))};var g=e=>{let{post:t,comments:a,writerRef:r,contnetRef:s,onClickRegister:o}=e;return n.createElement("div",{className:"post-page-comp"},n.createElement("div",{className:"main-image-container",style:{backgroundImage:"url("+t.mainImageUrl+")"}},n.createElement("div",{className:"cover"},n.createElement("div",{className:"center"},n.createElement("h1",{className:"title"},t.title),n.createElement("h3",{className:"date"},t.dateString)),n.createElement("div",{className:"left-bottom"}))),n.createElement("div",{className:"contents-container"},n.createElement("div",{className:"description markdown-style",dangerouslySetInnerHTML:{__html:t.html}}),n.createElement("div",{className:"comments-section"},n.createElement("h3",null,"Comments"),n.createElement("div",null,n.createElement(d,{writerRef:r,contentRef:s,onClickRegister:o})),a&&n.createElement("div",{className:"comments-container"},a.map(((e,t)=>n.createElement("div",{key:t,className:"comment-wrapper"},n.createElement(u,{comment:e}))))))),n.createElement("div",{className:"home-button"},n.createElement(m.rU,{to:"/",className:"hanjungwoo"},"Jungwoo Han")))};var h=e=>{let{pageContext:t}=e;const a=t.post,{0:m,1:u}=(0,n.useState)(null),d=(0,n.useRef)(null),h=(0,n.useRef)(null),{0:p,1:E}=(0,n.useState)({writer:"",writeDate:"",content:""}),f=async()=>{try{u(await(async e=>{const t=await c(e);if(t){const e=await fetch("https://api.github.com/repos/"+o+"/issues/"+(null==t?void 0:t.number)+"/comments",{method:"GET",headers:{Authorization:"token "+l()}}),a=(await e.json()).map((e=>JSON.parse(e.body)));return a}return[]})(a.id))}catch(e){console.error(e)}};return(0,n.useEffect)((()=>{f()}),[]),n.createElement(n.Fragment,null,n.createElement(s.Z,{title:a.title,description:a.description}),n.createElement(g,{post:a,comments:m,writerRef:d,contnetRef:h,onClickRegister:async e=>{var t,n;e.preventDefault();const r=null===(t=d.current)||void 0===t?void 0:t.value,s=null===(n=h.current)||void 0===n?void 0:n.value;if(!r||r.length<1)alert("No Writer");else if(!s||s.length<1)alert("No Content");else try{await(async(e,t,a)=>{const n=l(),r={writer:t,content:a,writeDate:i(new Date)};let s=await c(e);if(null==s){const t=await fetch("https://api.github.com/repos/"+o+"/issues",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token "+n},body:JSON.stringify({title:"post "+e+" comments",labels:["post comments"]})});s=await t.json()}if(!s)throw Error();await fetch("https://api.github.com/repos/"+o+"/issues/"+s.number+"/comments",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"token "+n},body:JSON.stringify({body:JSON.stringify(r)})})})(a.id,r,s),location.reload()}catch(m){console.error("Fail to register a comment"),console.error(m),alert("Fail to register a comment")}}}),n.createElement(r.Z,null))}}}]);
//# sourceMappingURL=component---src-page-template-post-tsx-8500d8b317cb7a551864.js.map