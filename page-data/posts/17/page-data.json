{"componentChunkName":"component---src-page-template-post-tsx","path":"/posts/17/","result":{"pageContext":{"post":{"id":17,"title":"Operating System 5 - Process Synchronization","dateString":"2021-12-15","description":"현대 시스템엔 여러 프로세스가 번갈아가며 한 프로세서를 사용하곤한다(concurrency). (여러 프로세스에서 동시에서 여러 프로세스가 실행되는 것은 parallelism). 그러다 보니까 이제 같은 메모리에 접근을 하는 경우 접근 순서에 따라서 결과가 달라지는 문제가 발생한다. 이러한 문제를 해결하기 위한 기법에 대해서 정리해보았다.","mainImageUrl":"/images/12-0.jpeg","postThemes":[{"name":"post","id":1}],"html":"<h1 id=\"operating-system---process-synchronization\" style=\"position:relative;\"><a href=\"#operating-system---process-synchronization\" aria-label=\"operating system   process synchronization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Operating System - Process Synchronization</h1>\n<p>현대 시스템엔 여러 프로세스가 번갈아가며 한 프로세서를 사용하곤한다(concurrency). (여러 프로세스에서 동시에서 여러 프로세스가 실행되는 것은 parallelism). 그러다 보니까 이제 같은 메모리에 접근을 하는 경우 접근 순서에 따라서 결과가 달라지는 문제가 발생한다. 이러한 문제를 해결하기 위한 기법에 대해서 정리해보았다.</p>\n<h2 id=\"1-critical-section-problem\" style=\"position:relative;\"><a href=\"#1-critical-section-problem\" aria-label=\"1 critical section problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Critical Section Problem</h2>\n<p>여러 프로세스가 동시에 같은 메모리에 접근하는 경우 그 접근하는 명령어 혹은 코드 부분을 critical section 이라고 한다. 이 critical section 에 동시에 진입하게 돼서 문제가 발생한다. 이 critical section 에 진입하기 전에 enterCS() 코드를 실행하고 나와서 exitCS() 코드를 실행해서 동시에 접근하는 문제를 해결해 보자.</p>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-1.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<h3 id=\"11-조건\" style=\"position:relative;\"><a href=\"#11-%EC%A1%B0%EA%B1%B4\" aria-label=\"11 조건 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1 조건</h3>\n<p>다음 세가지를 만족해야한다.</p>\n<ol>\n<li>Mutual Exclusion: 한 프로세스가 CS 에 있으면 다른 프로세스는 CS 에 있으면 안된다.</li>\n<li>Progress: CS 안에 아무도 없으면 CS 에 진입하는 프로세스는 바로 들어갈 수 있어야한다.</li>\n<li>Bounded wating: 무한히 대기하면 안된다.</li>\n</ol>\n<h3 id=\"12-기법들-간략하게\" style=\"position:relative;\"><a href=\"#12-%EA%B8%B0%EB%B2%95%EB%93%A4-%EA%B0%84%EB%9E%B5%ED%95%98%EA%B2%8C\" aria-label=\"12 기법들 간략하게 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2 기법들 간략하게</h3>\n<ul>\n<li>\n<p>Mutual Exclusion</p>\n<ul>\n<li>\n<p>2개의 프로세스들에만 적용 가능한 기법</p>\n<ul>\n<li>ME primitives version 1</li>\n<li>ME primitives version 2</li>\n<li>ME primitives version 3</li>\n<li>Dekker's algorithm</li>\n<li>Peterson's algorithm</li>\n</ul>\n</li>\n<li>\n<p>2개 이상의 프로세스에 적용 가능한 기법</p>\n<ul>\n<li>Dijkstra’s algorithm</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>하드웨어로 해결하는 기법</p>\n<ul>\n<li>TS instruction</li>\n<li>Swap instruction</li>\n<li>TS + ME</li>\n</ul>\n</li>\n<li>\n<p>Mutual Exclusion 은 while 을 계속 돌기 때문에 busy waiting 을 한다. 이것을 프로세스를 sleep 시켜서 해결한 기법</p>\n<ul>\n<li>Semaphore</li>\n<li>Spin lock</li>\n<li>Event counter / Sequencer</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2-mutual-exclusion-기법\" style=\"position:relative;\"><a href=\"#2-mutual-exclusion-%EA%B8%B0%EB%B2%95\" aria-label=\"2 mutual exclusion 기법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Mutual Exclusion 기법</h2>\n<h3 id=\"21-me-primitives-version-1\" style=\"position:relative;\"><a href=\"#21-me-primitives-version-1\" aria-label=\"21 me primitives version 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1 ME primitives version 1</h3>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-2.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<p>P0 가 CS 들어갔다 나가면 turn 이 1 이되는데 그러고 다시 P0 가 들어가면 turn 이 0 이라서 들어갈 수 없다. progress 조건을 만족하지 않는다.</p>\n<h3 id=\"22-me-primitives-version-2\" style=\"position:relative;\"><a href=\"#22-me-primitives-version-2\" aria-label=\"22 me primitives version 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2 ME primitives version 2</h3>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-3.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<p>P0 가 P1 이 CS 에 없어서 while 문을 통과하고 preemtion 됐다. P1 이 이제 실행하는데 P0 가 while 통과하고 flag0 을 true 로 안만들고 멈춰서 P1 도 while 통과해서 CS 로 진입한다. 이러면 둘 다 CS 로 들어가기 때문에 mutual exclusion 조건 만족하지 않게 된다.</p>\n<h3 id=\"23-me-primitives-version-3\" style=\"position:relative;\"><a href=\"#23-me-primitives-version-3\" aria-label=\"23 me primitives version 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3 ME primitives version 3</h3>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-4.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<p>P0 가 flag0 을 true 로 만들고 끝났다. 이제 P1 차례인데 CS 가 비어있음에도 flag0 이 true 로 되어있어서 CS 에 들어갈 수 없기 때문에 progress 조건을 만족하지 않는다.</p>\n<h3 id=\"24-dekkers-algorithm\" style=\"position:relative;\"><a href=\"#24-dekkers-algorithm\" aria-label=\"24 dekkers algorithm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4 Dekker's algorithm</h3>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-5.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<h3 id=\"24-petersons-algorithm\" style=\"position:relative;\"><a href=\"#24-petersons-algorithm\" aria-label=\"24 petersons algorithm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4 Peterson's algorithm</h3>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-6.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<h3 id=\"25-dijkstras-algorithm\" style=\"position:relative;\"><a href=\"#25-dijkstras-algorithm\" aria-label=\"25 dijkstras algorithm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.5 Dijkstra’s algorithm</h3>\n<p>2 개 이상의 프로세스에 적용할 수 있는 알고리즘</p>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-7.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<h2 id=\"3-하드웨어-명령어-지원\" style=\"position:relative;\"><a href=\"#3-%ED%95%98%EB%93%9C%EC%9B%A8%EC%96%B4-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%A7%80%EC%9B%90\" aria-label=\"3 하드웨어 명령어 지원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 하드웨어 명령어 지원</h2>\n<p>명령어는 atomicity, indivisibility 하다는 것을 이용해서 해결한다. 이전의 software ME solution 는 speed 느리고 중간에 preemtion 이 돼서 context switching 이 일어난다.</p>\n<h3 id=\"31-ts\" style=\"position:relative;\"><a href=\"#31-ts\" aria-label=\"31 ts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1 TS</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">boolean <span class=\"token function\">TS</span><span class=\"token punctuation\">(</span>boolean <span class=\"token operator\">*</span>target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    boolean rv <span class=\"token operator\">=</span> <span class=\"token operator\">*</span>target<span class=\"token punctuation\">;</span>\r\n    <span class=\"token operator\">*</span>target <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span><span class=\"token keyword\">return</span> rv<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-8.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<h3 id=\"32-swap\" style=\"position:relative;\"><a href=\"#32-swap\" aria-label=\"32 swap permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2 Swap</h3>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>boolean <span class=\"token operator\">*</span>a<span class=\"token punctuation\">,</span> boolean <span class=\"token operator\">*</span>b<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    boolean tmp <span class=\"token operator\">=</span> <span class=\"token operator\">*</span>a<span class=\"token punctuation\">;</span>\r\n    <span class=\"token operator\">*</span>a <span class=\"token operator\">=</span> <span class=\"token operator\">*</span>b<span class=\"token punctuation\">;</span>\r\n    <span class=\"token operator\">*</span>b <span class=\"token operator\">=</span> tmp<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-9.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<h3 id=\"33-ts-with-mutual-exclusion\" style=\"position:relative;\"><a href=\"#33-ts-with-mutual-exclusion\" aria-label=\"33 ts with mutual exclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.3 TS with Mutual Exclusion</h3>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-10.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<h2 id=\"4-semaphore-spin-lock-event-counter--sequencer\" style=\"position:relative;\"><a href=\"#4-semaphore-spin-lock-event-counter--sequencer\" aria-label=\"4 semaphore spin lock event counter  sequencer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Semaphore, Spin Lock, Event counter / Sequencer</h2>\n<h3 id=\"41-semaphore\" style=\"position:relative;\"><a href=\"#41-semaphore\" aria-label=\"41 semaphore permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1 Semaphore</h3>\n<p>Mutual Exclusion 은 기다리는 동안 while 을 계속 돌기 때문에 비효율적이다. 그래서 기다리는 동안 asleep 상태로 보내서 기다리게 하기 위해 나왔다.</p>\n<ul>\n<li>Semaphore 는 일단 정수형 변수다.</li>\n<li>semaphre 에 대해서 P(), V() 두개의 연산자가 있다. (initialize 하는 것 빼면)\n<ul>\n<li>P(Semaphore s): s 가 0 보다 크면 -1, 0 이면 queue 로 프로세스 보낸다</li>\n<li>V(Semaphore s): queue 에 프로세스 있으면 awake 후 실행. 없으면 s 1 증가</li>\n</ul>\n</li>\n<li>asleep queue 에서 깨우기 위한 스케줄링 기법이 없다.</li>\n</ul>\n<h4 id=\"411-mutual-exclusion-problem\" style=\"position:relative;\"><a href=\"#411-mutual-exclusion-problem\" aria-label=\"411 mutual exclusion problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1.1 Mutual Exclusion Problem</h4>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-11.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<h4 id=\"412-process-synchronization-problem\" style=\"position:relative;\"><a href=\"#412-process-synchronization-problem\" aria-label=\"412 process synchronization problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1.2 Process Synchronization Problem</h4>\n<p>한 프로세스가 다른 프로세스 다음에 실행되야 하는 경우 다른 프로세스 실행될 때까지 기다려야 한다.</p>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-12.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<h4 id=\"413-producer-consumer-problem\" style=\"position:relative;\"><a href=\"#413-producer-consumer-problem\" aria-label=\"413 producer consumer problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1.3 Producer Consumer Problem</h4>\n<p>Producer 는 버퍼에 생산해놓고 Consumer 는 버퍼에서 가져온다. 한 개의 버퍼만 쓰는 경우 여러 버퍼를 쓰는 경우가 있다. Consumer 는 Producer 가 produce 할 때까지 기다려야 한다.</p>\n<h4 id=\"414-reader-writer-problem\" style=\"position:relative;\"><a href=\"#414-reader-writer-problem\" aria-label=\"414 reader writer problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1.4 Reader Writer Problem</h4>\n<p>Reader 는 read 만 하고 Writer 는 write 만 한다.</p>\n<p>read-write 문제는 매우 많이 일어나서 read-write lock 을 제공하기도 한다.</p>\n<h4 id=\"415-dining-philosopher-problem\" style=\"position:relative;\"><a href=\"#415-dining-philosopher-problem\" aria-label=\"415 dining philosopher problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1.5 Dining philosopher problem</h4>\n<p>기억이 안납니다...</p>\n<h3 id=\"42-spin-lock\" style=\"position:relative;\"><a href=\"#42-spin-lock\" aria-label=\"42 spin lock permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.2 Spin Lock</h3>\n<p>semaphore 랑 똑같은데 CS 에 들어가있는 다른 프로세스가 금방 끝날것 같아서 그냥 busy waiting 시켜놓고 기다리게 할 때 사용한다.</p>\n<h3 id=\"43-evenetcount--sequencer-ticket-lock\" style=\"position:relative;\"><a href=\"#43-evenetcount--sequencer-ticket-lock\" aria-label=\"43 evenetcount  sequencer ticket lock permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.3 Evenetcount / Sequencer (ticket lock)</h3>\n<p>번호표를 뽑아서 번호표에 해당하면 통과시키고 현재 대기 번호보다 크면 asleep 시켜놓는 기법이다. busy waiting 막고 asleep 들어가 순서대로 awake 되기 때문에 queue 에서 스케줄링 기법있다.</p>\n<p>Sequencer</p>\n<ul>\n<li>정수형 변수</li>\n<li>현재 번호표 뽑으면 몇 번인지 저장하는 변수라고 생각하면 될 듯</li>\n<li>operation\n<ul>\n<li>ticket(Sequencer s): 현재 값 return 하고 값 1 증가</li>\n</ul>\n</li>\n</ul>\n<p>Eventcount</p>\n<ul>\n<li>정수형 변수</li>\n<li>event 가 일어난 횟수 기록</li>\n<li>현재 대기 번호 저장하는 변수라고 생각하면 될 듯</li>\n<li>operation\n<ul>\n<li>read(Eventcount e): 현재 값 return</li>\n<li>advance(Eventcount e): 값 1 증가</li>\n<li>await(Eventcount e, int v): 현재 대기 번호 e 인데 v 갖고 있는 사람이 온거지. e &#x3C; v 이면은 await 시킨다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"431-mutual-exclusion-problem\" style=\"position:relative;\"><a href=\"#431-mutual-exclusion-problem\" aria-label=\"431 mutual exclusion problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.3.1 Mutual Exclusion Problem</h4>\n<div style=\"text-align:center\">\r\n  <img src=\"/images/17-13.png\" style=\"width:90%; max-width: 400px\" />\r\n</div>\n<h2 id=\"5-case-studies\" style=\"position:relative;\"><a href=\"#5-case-studies\" aria-label=\"5 case studies permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Case Studies</h2>\n<h3 id=\"51-solaris\" style=\"position:relative;\"><a href=\"#51-solaris\" aria-label=\"51 solaris permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.1 Solaris</h3>\n<ul>\n<li>adaptive mutex: code segement 짧으면 busy waiting 하고 아니면 sleep 시키고 이거였남</li>\n<li>reader-writer lock 제공</li>\n<li>turnstiles: 몰랑</li>\n<li>locking mechanism 을 user level 에서도 사용 가능</li>\n</ul>\n<h3 id=\"52-windows-xp\" style=\"position:relative;\"><a href=\"#52-windows-xp\" aria-label=\"52 windows xp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.2 Windows XP</h3>\n<ul>\n<li>kernel 안: uniprocessor 에선 interrupt masking, multiprocessor 에선 spinlock</li>\n<li>kernel 밖: dispatcher object 인데 뭔지 모르겟넹</li>\n</ul>\n<h3 id=\"53-linux\" style=\"position:relative;\"><a href=\"#53-linux\" aria-label=\"53 linux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.3 Linux</h3>\n<ul>\n<li>Spinlocks, Semaphore, Ticket locks, Reader-writer lock 제공</li>\n<li>SMP 에서: 짧은 lock 이면 spin lock, 긴 lock 이면 semaphore 사용한다.</li>\n<li>uniprocessor 에서: 그냥 preemtion 시키는 것을 껐다 켰다 하는 것으로</li>\n</ul>"}}},"staticQueryHashes":[],"slicesMap":{}}